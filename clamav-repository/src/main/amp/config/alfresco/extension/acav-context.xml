<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="acav.scanService" class="org.alfresco.repo.management.subsystems.SubsystemProxyFactory">
    <property name="sourceApplicationContextFactory">
      <ref bean="acav" />
    </property>
    <property name="sourceBeanName">
      <value>acav.scanService</value>
    </property>
    <property name="interfaces">
      <list>
        <value>org.redpill.alfresco.clamav.repo.service.ScanService</value>
      </list>
    </property>
  </bean>

  <bean id="acav.scanAction" class="org.alfresco.repo.management.subsystems.SubsystemProxyFactory">
    <property name="sourceApplicationContextFactory">
      <ref bean="acav" />
    </property>
    <property name="sourceBeanName">
      <value>acav.scanAction</value>
    </property>
    <property name="interfaces">
      <list>
        <value>org.redpill.alfresco.clamav.repo.service.ScanAction</value>
      </list>
    </property>
  </bean>

  <bean id="acav.systemScanDirectoryRegistry" class="org.alfresco.repo.management.subsystems.SubsystemProxyFactory">
    <property name="sourceApplicationContextFactory">
      <ref bean="acav" />
    </property>
    <property name="sourceBeanName">
      <value>acav.systemScanDirectoryRegistry</value>
    </property>
    <property name="interfaces">
      <list>
        <value>org.redpill.alfresco.clamav.repo.service.SystemScanDirectoryRegistry</value>
      </list>
    </property>
  </bean>

  <bean id="webscript.org.redpill.alfresco.clamav.scan.get" class="org.redpill.alfresco.clamav.repo.script.ScanGet" parent="webscript">
    <property name="scanService" ref="acav.scanService" />
  </bean>

  <bean id="webscript.org.redpill.alfresco.clamav.directory.get" class="org.redpill.alfresco.clamav.repo.script.DirectoryGet" parent="webscript">
    <property name="systemScanDirectoryRegistry" ref="acav.systemScanDirectoryRegistry" />
  </bean>

  <bean id="webscript.org.redpill.alfresco.clamav.handle.get" class="org.redpill.alfresco.clamav.repo.script.HandleGet" parent="webscript">
    <property name="scanAction" ref="acav.scanAction" />
  </bean>

</beans>
